

services:
  app:
    build:
      context: ../server
      dockerfile: Dockerfile
    image: eventoc-server:latest
    restart: unless-stopped
    env_file:
      - ./.env   # Make sure .env is inside server/
    ports:
      - "3000:3000"
    networks:
      - eventoc-network
    # Use depends_on only if you enable local mongo
    # depends_on:
    #   - mongo

# Uncomment this section if you want a local Mongo container instead of Atlas
#  mongo:
#    image: mongo:6.0
#    container_name: eventoc-mongo
#    restart: unless-stopped
#    volumes:
#      - mongo-data:/data/db
#    environment:
#      MONGO_INITDB_ROOT_USERNAME: kumar980062begin_db_user
#      MONGO_INITDB_ROOT_PASSWORD: 3jys1HYmQG1V2lGh
#    ports:
#      - "27017:27017"
#    networks:
#      - eventoc-network

# Uncomment this section only if using local Mongo, to manage DB via web UI
#  mongo-express:
#    image: mongo-express:latest
#    restart: unless-stopped
#    environment:
#      ME_CONFIG_MONGODB_ADMINUSERNAME: kumar980062begin_db_user
#      ME_CONFIG_MONGODB_ADMINPASSWORD: 3jys1HYmQG1V2lGh
#      ME_CONFIG_MONGODB_SERVER: mongo
#      ME_CONFIG_BASICAUTH_USERNAME: admin
#      ME_CONFIG_BASICAUTH_PASSWORD: admin
#    ports:
#      - "8081:8081"
#    depends_on:
#      - mongo
#    networks:
#      - eventoc-network

volumes:
  mongo-data:

networks:
  eventoc-network:
    driver: bridge
